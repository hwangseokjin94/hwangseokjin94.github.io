

<h1>ğŸ‘”ğŸ‘–CLOTHES-SETğŸ‘•ğŸ‘”<h1>ìŠ¤í”„ë§ê¸°ë°˜ì˜ë¥˜ì‡¼í•‘ëª°


 <ul>
        <li>DB ì—°ë™ì„ í™œìš©í•œ íšŒì›ê°€ì…, ë¡œê·¸ì¸, ì£¼ë¬¸ì‹œìŠ¤í…œ, ê²Œì‹œ	íŒ, ë¦¬ë·° ê¸°ëŠ¥ êµ¬í˜„ </li>
        <li>ìƒí’ˆ êµ¬ë§¤ê¸ˆì•¡ì— ë”°ë¥¸ ë“±ê¸‰ì œì™€ í¬ì¸íŠ¸ ì ë¦½ êµ¬í˜„ </li>
        <li>ê´€ë¦¬ì í˜ì´ì§€ë¥¼ ë³„ë„ë¡œ ì œì‘í•˜ì—¬ íšŒì› ì •ë³´, êµ¬ë§¤ë‚´ì—­	ì„ ë³„ë„ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ì œì‘ </li>
    </ul>

------

<h2>Client</h2>

frontend technologies used in this project:

<ul>
    <li>JavaScript, HTML, CSS</li>
    <li>jQuery, Ajax</li>
    <li>SweetAlert, FontAwesome</li>    
</ul>

<h2>Server</h2>

backend technologies used in this project:

<ul>
    <li>Spring, Apache Tomcat</li>
    <li>Oracle DB, MyBatis, JDBC,</li>
    <li>JSON-simple</li>    
    <li>Javax(Mail)</li>    
</ul>

<h2>Open API </h2>

<ul>
	<li>DAUM ì£¼ì†Œì°¾ê¸°</li>    
</ul>

---------------------

<h2>í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨</h2>


<img src="https://user-images.githubusercontent.com/59395774/88129300-b7011300-cc12-11ea-930c-bc1febccb7b4.png" width="80%">

<h2>Member</h2>


------

ë¡œê·¸ì¸Command

```java
package com.koreait.cset.command.member;
import java.io.IOException;
import java.io.PrintWriter;
import java.util.Map;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpSession;
import org.apache.ibatis.session.SqlSession;
import org.springframework.ui.Model;
import com.koreait.cset.common.CsetCommand;
import com.koreait.cset.dao.MemberDAO;
import com.koreait.cset.dao.OrderDAO;
import com.koreait.cset.dto.MemberDTO;
//íšŒì›ì˜ IDì™€ PWë¥¼ í™•ì¸ì„í•˜ëŠ” loginCommand
public class MemberLoginCommand implements CsetCommand {

	@Override
	public void execute(SqlSession sqlSession, Model model)  {
		Map<String, Object> map = model.asMap();
		HttpServletRequest request = (HttpServletRequest)map.get("request");
		HttpServletResponse response = (HttpServletResponse)map.get("response");
		
		String mId = request.getParameter("mId");
		String mPw = request.getParameter("mPw");
		
	  // MemberDTO   íšŒì›ì˜ ì •ë³´ë¥¼ MemberDTOì—ë‹´ëŠ”ë‹¤.
		MemberDTO mDTO = new MemberDTO();
		mDTO.setmId(mId);
		mDTO.setmPw(mPw);
		MemberDAO mDAO = sqlSession.getMapper(MemberDAO.class);
		OrderDAO oDAO = sqlSession.getMapper(OrderDAO.class);
		HttpSession session = null;
		
		MemberDTO loginDTO =mDAO.selectBymIdmPw(mDTO);
      //ì´ì£¼ë¬¸ê¸ˆì•¡
      //êµ¬ë§¤ì•¡ì—ë”°ë¥¼ íšŒì›ë“±ê¸‰ì„ ë¶€ì—¬í•˜ê¸°ìœ„í•˜ì—¬ ë¡œê·¸ì¸í• ë•Œ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ê³  ë‹¤ìŒë“±ê¸‰ì„ í‘œì‹œë¥¼ í•˜ê¸°ìœ„í•´ ë¡œì§ì„ êµ¬í˜„
		int totalPrice = oDAO.orderSumMoney(mId);
		int gradeChangeLimit = 100000;
	
		if(loginDTO != null) { // ê²€ìƒ‰ëœ íšŒì›ì´ ìˆìœ¼ë©´
			char abc = loginDTO.getmGrade();
			String nowGrade =Character.toString(abc);				
			char nextGrade;
			if(totalPrice<100000) {
				nextGrade ='C';
				 gradeChangeLimit = 100000;
			}else if(totalPrice<400000) {
				nextGrade ='B';
				gradeChangeLimit = 400000;
			}else if(totalPrice<700000) {
				nextGrade ='A';
				gradeChangeLimit = 700000;
			}else {
				nextGrade ='A';
				gradeChangeLimit = 1000000;
			}
			
			if(nowGrade.equals("D")) {
				nextGrade ='C';
				 gradeChangeLimit = 100000;
			}else if(nowGrade.equals("C")) {
				nextGrade ='B';
				 gradeChangeLimit = 400000;
			}else if(nowGrade.equals("B")) {
				nextGrade ='A';
				 gradeChangeLimit = 700000;
			}else if(nowGrade.equals("A")) {
				nextGrade ='A';
				 gradeChangeLimit = 1000000;
			}
			
			
			// ** ì„¸ì…˜ì— íšŒì›ì •ë³´ ì˜¬ë¦¬ê¸° **
			session = request.getSession();
			session.setAttribute("loginDTO", loginDTO); // ë¡œê·¸ì¸ì— ì„±ê³µí•˜ë©´ íšŒì›ì •ë³´ê°€ sessionì— ì €ì¥.
			session.setAttribute("totalPrice", totalPrice); //ëˆ„ì ê¸ˆì•¡ì„ ì„¸ì…˜ì— ì˜¬ë¦¼.
			session.setAttribute("nextGrade", nextGrade);//ë‹¤ìŒë“±ê¸‰ì„ ì„¸ì…˜ì— ì˜¬ë¦¼.
			session.setAttribute("gradeChangeLimit", gradeChangeLimit);//êµ¬ë§¤ì•¡ì œí•œë“±ë¦…ì„ ì„¸ì…˜ì—ì˜¬ë¦¼.					
		}  else { //íšŒì›ì´ì¼ì¹˜í•˜ì§€ì•Šìœ¼ë©´ alertì„ë„ì›€
			PrintWriter out;
			try {
				response.setContentType("text/html; charset=utf-8");
				out = response.getWriter();
				out.println("<script type='text/javascript'>");
				out.println("alert('ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼í™•ì¸í•´ì£¼ì„¸ìš”');");
				out.println("history.back();");
				out.println("</script>");
				out.close();
			} catch (IOException e) {
				
				e.printStackTrace();
			}
		}
			
	}

}
```

<img src="https://user-images.githubusercontent.com/59395774/88129448-1c550400-cc13-11ea-915e-31412db5a669.png" width="80%">

-----

#### 

<ul>
    <li>íšŒì›ì˜ ë§ˆì´í˜ì´ì§€ì•ˆì—ì„œëŠ” íšŒì›ì˜ì •ë³´ì™€ íšŒì›ì´ ì£¼ë¬¸í•œë‚´ì—­ ì£¼ë¬¸í•œ ìƒí’ˆ ì •ë³´ê°€ í•„ìš”</li>
    <li>íšŒì›í…Œì´ë¸”  ì£¼ë¬¸í…Œì´ë¸” ìƒí’ˆí…Œì´ë¸”ì„ ì¡°ì¸ì„ í•¨.</li>
    <li>joinVOìƒì„±</li>
</ul>


<img src="https://user-images.githubusercontent.com/59395774/88129513-3db5f000-cc13-11ea-95dc-531c53f69e8f.png" width="80%">
<img src="https://user-images.githubusercontent.com/59395774/88129581-63db9000-cc13-11ea-99c5-3e4a5a9c09ef.png" width="80%">

-------

ë©¤ë²„ ì£¼ìš”ê¸°ëŠ¥ 1.

<img src="https://user-images.githubusercontent.com/59395774/88129623-7fdf3180-cc13-11ea-91ba-0a800177d945.png" width="80%">

â€‹    

```xml
 //íšŒì› ìƒí’ˆì£¼ë¬¸ ì¡°íšŒê¸°ê°„ì˜ íŒŒë¼ë¯¸í„°ë¡œ ì •ë³´ë¥¼ SELECTí•˜ëŠ”sql
<select id="memberOrderPeriod" resultType="com.koreait.cset.dto.JoinVO">
		SELECT M.MID , M.MNAME, P.PNAME,P.PPRICE , O.OAMOUNT, O.ODATE, O.ONO, P.PFILENAME ,P.PNO
		FROM ORDERS O , MEMBERS M , PRODUCTS P
		WHERE M.MNO = O.MNO
		AND P.PNO = O.PNO 
		AND M.MNO = #{param1}		
	<if test="param2 == null">
	  AND TO_DATE(TO_CHAR(O.ODATE, 'YYYY-MM-DD'), 'YYYY-MM-DD')
        	BETWEEN TO_DATE('2000-01-01', 'YYYY-MM-DD')  
      AND TO_DATE(#{param3}, 'YYYY-MM-DD')			
	</if>		
   <if test="param3 == null">
	AND TO_DATE(TO_CHAR(O.ODATE, 'YYYY-MM-DD'), 'YYYY-MM-DD') 
        BETWEEN TO_DATE(#{param2}, 'YYYY-MM-DD')  
   	AND TO_DATE(SYSDATE, 'YYYY-MM-DD')			
		</if>
		<if test="param2 != null and param3 != null">
			AND TO_DATE(TO_CHAR(O.ODATE, 'YYYY-MM-DD'), 'YYYY-MM-DD') 
             BETWEEN TO_DATE(#{param2}, 'YYYY-MM-DD') 
	        AND TO_DATE(#{param3}, 'YYYY-MM-DD')	
		</if>		
		ORDER BY TO_DATE(O.ODATE, 'YYYY-MM-DD') DESC
</select>

```

â€‹    

-----

ê´€ë¦¬ì

<img src="https://user-images.githubusercontent.com/59395774/88129689-b026d000-cc13-11ea-9ce5-82e23508636e.png" width="80%">

íšŒì›ëª©ë¡ì—ì„œ ì²´í¬ë°•ìŠ¤ë¥¼ ì„ íƒí•œí›„ì˜ íšŒì›ì‚­ì œë¥¼ ëˆ„ë¥´ê²Œë˜ë©´  ajaxë¥¼ í†µí•˜ì—¬ ë°ì´í„°ì—ìŠ¤ íšŒì›ì œê±°

```javascript

$(document).ready(function(){
//1.ê´€ë¦¬ì íšŒì›ì‚­ì œ     
   $('#memberDeleteBtn').click(function(){
	   if( confirm('íšŒì› ì‚­ì œë¥¼ ì§„í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?') ) {
	        var mIdArray = [];  //íšŒì›ì˜ ì•„ì´ë””ë¥¼ ë°°ì—´ë¡œ ë‹´ê¸°
	        var mNoArray = []; //íšŒì›ë²ˆí˜¸ ë°°ì—´ë¡œë‹´ê¸°
	      
	         $('input[name="mId"]:checked').each(function(i){//ì²´í¬ëœ ë¦¬ìŠ¤íŠ¸ ì €ì¥
	            mIdArray.push($(this).val());         
	         });      
	         $('input[name="mId"]:checked ~ input[type="hidden"]').each(function(i){
                 //ì²´í¬ëœ ë¦¬ìŠ¤íŠ¸ ì €ì¥
	        	 mNoArray.push($('.mNo').val());         	          
	         });
	         var objParams = {
	                  "mIdList" : mIdArray  
	                  , "mNoList" : mNoArray
	         };
           
		      $.ajax({
		         url:'memberDeleteAdmin',
		         type:'post',
		         dataType: "json",
		         contentType :"application/x-www-form-urlencoded; charset=UTF-8",
		         data:objParams,
		         success : function(responseText) {
		            if(true){
		               swal({
		                   title: "íšŒì›ì‚­ì œ.",
		                   text: responseText.count+"ëª… ",
		                   icon: "success" 
		               });
		            }
		         },
		         error: function() {
		            swal({
		                title: "ajaxí†µì‹ ì‹¤íŒ¨.",
		                text: "",
		                icon: "warning" 
		            });
		         }
		      });//ajax
		   
	   } else {
		   alert('ì‚­ì œë¥¼ ì·¨ì†Œí•©ë‹ˆë‹¤');
		   return;
	   } // if end
   });//btn
});
```

```java
	//24 í´ë¡œì…‹íšŒì› ì‚­ì œí•˜ê¸°(ì»¨íŠ¸ë¡¤ëŸ¬)
	@ResponseBody
	@RequestMapping(value="memberDeleteAdmin", method=RequestMethod.POST, produces="application/json; charset=utf-8")
	public Object memberDeleteAdmin(@RequestParam(value="mIdList[]") List<String> mIdList
									, @RequestParam(value="mNoList[]") List<Integer> mNoList													
									, Model model) {
		MemberDAO mDAO = sqlSession.getMapper(MemberDAO.class);
		for(String mId:mIdList) {
			mDAO.memberDeleteReview(mId);
		}
		for(Integer mNo:mNoList) {
			mDAO.memberDeleteOrder(mNo);			
		}
		for(String mId:mIdList) {			
			mDAO.memberDeleteBoard(mId);
			mDAO.memberDeleteCart(mId);
			//íšŒì›ì„ ì œê±°í•˜ê¸°ìœ„í•´ ê·¸ë™ì•ˆíšŒì›ì˜ ê¸°ë¡ì„ ì œê±°ë¥¼ í•´ì•¼í•©ë‹ˆë‹¤.
			mDAO.memeberDelete(mId);			
		}		
			int count = mIdList.size();	
			JSONObject obj = new JSONObject();
			obj.put("count",count );
		return obj.toJSONString();
	}
	
```

------

ê´€ë¦¬ìê°€ íšŒì›ì˜ ë“±ê¸‰ê³¼ í¬ì¸íŠ¸ì§€ê¸‰

<img src="https://user-images.githubusercontent.com/59395774/88129742-ccc30800-cc13-11ea-86e4-dd803f57d56a.png" width="80%">

```java
//ajaxí†µì‹ ì„í•˜ê¸°ìœ„í•´ì„œëŠ” @ResponseBody ì™€ producesì˜ ë°©ì‹ì„ ê¼­ ì…ë ¥ì„ í•´ì•¼ë¨.
//20.ê´€ë¦¬ìê°€ íšŒì› ë“±ê¸‰ë³€ê²½
	@ResponseBody
	@RequestMapping(value="memberUpdateGrade", method=RequestMethod.POST, produces="text/html; charset=utf-8")
	public String memberUpdateGrade(@RequestParam("afterGrade") char afterGrade,
				     			  @RequestParam("mNo") int mNo,
								Model model) {
		
		MemberDAO mDAO = sqlSession.getMapper(MemberDAO.class);
		mDAO.memberUpdateGrade(afterGrade, mNo);		
		String responseText = afterGrade+"";
		return responseText;
	}
	
	//21.ê´€ë¦¬ìê°€ íšŒì› í¬ì¸íŠ¸ ì§€ê¸‰
	@ResponseBody
	@RequestMapping(value="memberUpdatePoint", method=RequestMethod.POST, produces="application/json; charset=utf-8")
	public String memberUpdatePoint(@RequestParam("afterPoint") int afterPoint,
								 @RequestParam("mNo") int mNo,
								  Model model){
		JSONObject obj = new JSONObject();
		MemberDAO mDAO = sqlSession.getMapper(MemberDAO.class);
		mDAO.memberUpdatePoint(afterPoint, mNo);
		obj.put("result", afterPoint);
		return obj.toJSONString();
	}
	
```

```javascript


$(document).ready( function(){	 	
//1.íšŒì›ë“±ê¸‰ë³€ê²½		
	$('#updateGradeBtn').click(function(){
		$.ajax({
			url:'memberUpdateGrade',
			type:'POST',
			dataType:'text',
			data:'afterGrade='+ $( '#afterGrade option:selected' ).val() +'&mNo='+ $( '#mNo' ).val(), //selectê°’ ìœ ì˜
			success : function(responseText) {
				var grade=  $('#afterPoint option:selected').val() ;
				 $('#grade').text(responseText);
					swal({
					    title: "ë“±ê¸‰ì´ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.",
					    text: responseText+"ë³€ê²½",
					    icon: "success" 
					});				
			},
			error: function() {
				swal({
				    title: "ajaxí†µì‹ ì‹¤íŒ¨.",
				    text: "",
				    icon: "warning" 
				});
			}
		});//ajax
	});//btn	
//2.ê´€ë¦¬ìê°€ íšŒì› í¬ì¸íŠ¸ ì§€ê¸‰		
    function fn_calcPoint( point, afterPoint ){
           return point+afterPoint; // ê°’ì„ ë³´ê¸°ìœ„í•œ ë‹¨ìˆœí•¨ìˆ˜ dbì—ì €ì¥ë˜ëŠ” ë°ì´í„° ë³´ì—¬ì£¼ê¸°ìš©ë„
    }	
	$('#updatePointBtn').click(function(){
		$.ajax({
			url:'memberUpdatePoint',
			type:'POST',
			dataType:'json',
			data:'afterPoint='+ $( '#afterPoint option:selected' ).val() +'&mNo='+ $( '#mNo' ).val(),
			success : function(responseObject) {			
				var point = parseInt( $('#point').text() );
				var afterPoint = parseInt( $('#afterPoint option:selected').val() );

                 $('#point').text( fn_calcPoint( point, afterPoint ));
                 $('#point').css('color', 'blue').css('font-weight', 'bold');
				swal({
				    title: "í¬ì¸íŠ¸ê°€ ì§€ê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤",
				    text: responseObject.result+"í¬ì¸íŠ¸ ì§€ê¸‰!",
				    icon: "success" 
				});			
			},
			error: function() {
				swal({
				    title: "ajaxí†µì‹ ì‹¤íŒ¨.",
				    text: "",
				    icon: "warning" 
				});
			}
		});//ajax
	});//btn
 });//end
```

<img src="https://user-images.githubusercontent.com/59395774/88129776-e1070500-cc13-11ea-90da-bbe190d52df3.png" width="80%">

```jsp

<div class="admin-prod wrap">
<h1 class="page-title">ìƒí’ˆ ê´€ë¦¬ í˜ì´ì§€</h1>
<form>
<table>
   <caption class="blind">ê´€ë¦¬ì ìƒí’ˆí˜ì´ì§€ ì…ë‹ˆë‹¤.</caption>
   <thead>
   <tr>
   	<td colspan="9">
   		<input type="text" name="searchBox"/><input type="button" value="ê²€ìƒ‰" onclick="fn_search(this.form)"/>
   	</td>
   </tr>
   <tr>
      <td>ìƒí’ˆë²ˆí˜¸</td>
      <td>ìƒí’ˆì´ë¦„</td>
      <td>ìƒí’ˆ ì´ë¯¸ì§€</td>
      <td>ê°€ê²©</td>
      <td>ëŒ€ë¶„ë¥˜</td>
      <td>ì†Œë¶„ë¥˜</td>
      <td>ë¸Œëœë“œ</td>
      <td>í• ì¸ìœ¨(%)</td>
      <td>í• ì¸ëœê°€ê²©</td>
   </tr>
   </thead>
   <tbody>
      <c:if test="${empty plist}">
            <tr> <td colspan="10">ì´ë¯¸ì§€ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>
      </c:if>
      <c:if test="${not empty plist}">
            <c:forEach var="pDTO" items="${plist}" varStatus="k">
               <script type="text/javascript">
               
                  function fn_calcPrice( price, disrate ){
                     return price * ( 1 - (disrate/100) );
                  }               
                   $(document).ready( function(){
                      
                     var k = '${k.index}'; //forEach ë¡œ ë°˜ë³µë˜ëŠ” í…Œì´ë¸”ì•ˆì—ì„œ í•˜ë‚˜ì˜ ë ˆì½”ë“œë¥¼ ì‹ë³„í•˜ê¸°ìœ„í•¨ê³¼ ê° ë²„íŠ¼ê³¼ ë°ì´í„°ë¥¼ ì„ íƒ ìœ„í•¨.kë³€ìˆ˜ì„ ì–¸                    
                     var price = parseInt( $('#price'+k).text() );
                     var disrate = parseInt( $('#disrate'+k).text() );
                           
                  //1.ì œí’ˆê°€ê²©ë³€ê²½í•˜ê¸°    
                     $('#updatePriceBtn'+k).click(function(){
                        $.ajax({
                           url:'memberUpdatePrice',
                           type:'POST',
                           dataType:'json',
                           data:'afterPrice='+ $( '#afterPrice'+k ).val() +'&pNo='+ $( '#pNo'+k ).val(),
                           success : function(responseObject) {
                              
                              $('#price'+k).text(responseObject.result);                                 
                              $('#price'+k).css('color', 'blue').css('font-weight', 'bold');
                              price = parseInt(responseObject.result);
                              $('#resultPrice'+k).text( Math.round( fn_calcPrice( price, disrate ) /100 )*100 );
                              $('#resultPrice'+k).css('color', 'blue').css('font-weight', 'bold');
                              swal({
                                  title: "ê°€ê²©ì´ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.",
                                  text: "",
                                  icon: "success" });
                           },
                           error: function() {
                              swal({
                                  title: "ê°€ê²©ì„ì…ë ¥í•˜ì„¸ìš”.",
                                  text: "",
                                  icon: "warning"});
                           }
                        });//ajax
                     });//updatePriceBtn
                       
                  //2.ì œí’ˆí• ì¸ë¥ ë³€ê²½í•˜ê¸°
                   $('#updateDisrateBtn'+k).click(function() {
                     $.ajax({
                        url:'memberUpdatedisrate',
                        type:'POST',
                        dataType:'json',
                        data:'afterDisrate='+ $( '#afterDisrate'+k ).val() +'&pNo='+ $( '#pNo'+k ).val(),
                        success : function(responseObject) {
                           if(true){                                 
                              $('#disrate'+k).text(responseObject.result+'%');
                              $('#disrate'+k).css('color', 'blue').css('font-weight', 'bold');
                              disrate = parseInt( responseObject.result );
                              $('#resultPrice'+k).text( Math.round( fn_calcPrice( price, disrate ) /100 )*100 );
                              $('#resultPrice'+k).css('color', 'blue').css('font-weight', 'bold');
                              swal({
                                  title: "í• ì¸ìœ¨ì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤..",
                                  text: "",
                                  icon: "success"
                              });
                           }else{                     
                           }
                        },   
                        error: function() {
                           swal({
                               title: "í• ì¸ìœ¨ì„ì…ë ¥í•˜ì„¸ìš”.",
                               text: "",
                               icon: "warning"
                           });
                        }               
                     });//ajax
                  });//updateDisrateBtn
                     
                     
                     
                   });//end
                  
               </script>
                  <tr>                     
                     <td>
                        <span>${pDTO.pNo}</span>
                        <input type="hidden" id="pNo${k.index}" value="${pDTO.pNo}"/>
                     </td>
                     <td>${pDTO.pName}</td>                     
                     <td><img class="product-img small" alt="${pDTO.pFilename}" src="resources/product_photos/${pDTO.pFilename}"></td>
                     
                     <td class="price-change">
                        <span id="price${k.index }">${pDTO.pPrice}</span>
                        <span><input id="afterPrice${k.index }" name="afterPrice" type="text"></span>                        
                        <span><input id="updatePriceBtn${k.index }" type="button" value="ê°€ê²©ë³€ê²½"></span>
                     </td>                     
                     <td>${pDTO.pCategory}</td>
                     <td>${pDTO.pCategory_sub}</td>
                     <td>${pDTO.pBrand}</td>                     
                     <td class="price-change">
                        <span id="disrate${k.index }">${pDTO.pDisrate}%</span>
                        <span><input id="afterDisrate${k.index }" name="afterDisrate" type="text"></span>                        
                        <span><input id="updateDisrateBtn${k.index}" type="button" value="í• ì¸ìœ¨ë³€ê²½"></span>
                     </td>               
                     <td>
                        <fmt:parseNumber var="test" integerOnly="true" value="${pDTO.pPrice*(1-(pDTO.pDisrate*0.01))}"/>
                        <span id="resultPrice${k.index }">
                          <%--  ${ (pDTO.pPrice*(1-(pDTO.pDisrate*0.01)) % 100) ge 50 ?  } --%>
                        </span>            
                     </td>                  
                  </tr>
            </c:forEach>
         </c:if>
   </tbody>

</table>
</form>
</div>
```
<img src="https://user-images.githubusercontent.com/59395774/89262120-268eed80-d66a-11ea-960f-660d26c7559d.png" width="80%">


<h2> êµ¬ë§¤ìˆ˜ëŸ‰ì—ë”°ë¥¸ TOP10 ë¦¬ìŠ¤íŠ¸</h2>

fromì ˆ  ì£¼ë¬¸í…Œì´ë¸” ìƒí’ˆí…Œì´ë¸”ì„ ì¡°ì¸í•œí›„  ì£¼ë¬¸ìƒí’ˆë²ˆí˜¸ë¼ë¦¬ ê·¸ë£¹í•œí›„ ì£¼ë¬¸ìˆ˜ëŸ‰ì˜ í•©ìœ¼ë¡œ ë‚´ë¦¼ì°¨ìˆœì„í•œë‹¤ ì¡°ê±´ì€ 10ê¹Œì§€ ì´ë‹¤.

```xml
<select id="productsOrderByRank" resultType="com.koreait.cset.dto.ProductsDTO">
    SELECT P.PNO, P.PFILENAME, P.PNAME, P.PPRICE, PDISRATE, ( SELECT AVG( RRATING ) FROM REVIEWS R WHERE P.PNO = R.PNO ) AS PRATING
    FROM PRODUCTS P , (SELECT *
                     FROM (SELECT O.PNO,  SUM(O.OAMOUNT)
                           FROM ORDERS O, PRODUCTS P
                           WHERE O.PNO = P.PNO
                           GROUP BY O.PNO
                           ORDER BY SUM(O.OAMOUNT) DESC)
                           WHERE ROWNUM &lt;= 10) A
    WHERE P.PNO = A.PNO
</select> 
```

ìƒí’ˆì¹´í…Œê³ ë¦¬ ì„œë¸Œì¹´í…Œê³ ë¦¬ ë¸Œëœë“œ ì²´í¬ë°•ìŠ¤ì—ë”°ë¥¸ sqlë¬¸

```xml
<select id="productsSelectList" resultType="com.koreait.cset.dto.ProductsDTO">
   SELECT PNO, PNAME, PFILENAME, PPRICE, PCATEGORY, PCATEGORY_SUB, PBRAND,( SELECT AVG( RRATING ) FROM REVIEWS R WHERE P.PNO = R.PNO ) AS PRATING, PDISRATE 
      FROM PRODUCTS P
      <where>
         <if test="pCategory != null">
            PCATEGORY = ${pCategory}
         </if>
         <if test="pCategory_sub != null">
            PCATEGORY_SUB = ${pCategory_sub}
         </if>
         <if test="pBrand != null ">
               PBRAND = ${pBrand}
         </if>
      </where>
      ORDER BY PNO DESC
   </select>
```

